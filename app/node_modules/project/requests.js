var jade = require('jade');
var paramify = require('paramify');
var header = require('header');
var footer = require('footer');
var config = require('rc')('prohub');
var summarybar = require('summarybar');
var dal = require('dal/project');

var templateFile = __dirname + '/templates/index.jade';
var body = jade.compileFile(templateFile);

exports.test = function(req, res) {
  var match = paramify(req.url);

  if (match('/project/:id')) {
    return true;
  }
};

exports.handler = function(req, res) {

  res.write(header());

  var body_args = {
    org: config.org || 'Unnamed',
    summarybar: summarybar()
  };

  res.write(body(body_args));
  res.end(footer());

};

